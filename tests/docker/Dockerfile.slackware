# Slackware test container for SoulOfNix
# Note: Using Debian as base with Slackware-like setup since official Slackware images are limited
# This simulates the single-user Nix mode used on Slackware/UnRAID
FROM --platform=linux/amd64 debian:bookworm-slim

# Install basic dependencies
RUN apt-get update && apt-get install -y \
    bash \
    curl \
    git \
    xz-utils \
    sudo \
    ca-certificates \
    && rm -rf /var/lib/apt/lists/*

# Simulate Slackware/UnRAID environment
RUN echo "14.2" > /etc/slackware-version && \
    mkdir -p /boot/config/extra

# Copy SoulOfNix files (runs as root, typical for UnRAID)
COPY . /root/SoulOfNix/

# Test as root (common on UnRAID)
WORKDIR /root/SoulOfNix

# Run test script from inside SoulOfNix directory
CMD ["./tests/test-install.sh"]
